task extractMetadata {
    doLast {println 'Extracting metadata.,'}
}

extractMetadata.onlyIf {
    System.properties['extract.metadata'] == 'true'
}

task extractData {
    doLast {println 'Extracting database data.'}
}

task extractDatabase

extractDatabase {
    doLast{println 'Zipping extract data to backupdata.zip'}
}

extractDatabase {
    doLast{println 'Closing database connection.'}
}

extractDatabase.dependsOn extractData, extractMetadata

extractData {
    doFirst {println 'Connection to the database.'}
    doFirst {println 'Setting database connection.'}
}